(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{896:function(e,t,a){"use strict";a.d(t,"h",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"i",(function(){return l})),a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return s})),a.d(t,"g",(function(){return u})),a.d(t,"e",(function(){return m})),a.d(t,"f",(function(){return f})),a.d(t,"d",(function(){return p}));var n=a(898),r=a.n(n);function o(e){if(e>0){var t,a=parseFloat(e)/36e5;return Number.isInteger(a)?a:a.toFixed(2)}return 0}function i(e,t){var a=[];return e.toString().split(",").map((function(e){a.push({value:e,label:e})})),t&&a.push({value:"ALL",label:"ALL"}),a}function l(e){if(null!==e&&"null"!==e){var t=parseFloat(e.toString());return t<1e3?r()(t).format("0a"):r()(t).format("0.00a")}return"-"}function c(e,t,a){return 0===e?0:""!==a?"MessagesInPerSec"===a.metricName||"FailedProduceRequestsPerSec"===a.metricName||"FailedFetchRequestsPerSec"===a.metricName?l(e):r()(e).format("0.00b"):void 0}function s(e){return 0===e?"0 B":r()(e).format("0.00b")}function u(e){return r()(e).format("0,0")}function m(e,t){var a=[];return a=e.sort((function(e,a){return e=e[t],a=a[t],e.localeCompare(a)}))}function f(e,t,a){var n;return e.sort((function(e,n){return e=e[t],n=n[t],"asc"===a?e.localeCompare(n):n.localeCompare(e)}))}function p(e,t,a){var n;return e.sort((function(e,n){var r=e[t],o=n[t];return"number"==typeof r?a&&"asc"===a?r-o:o-r:a&&"asc"===a?r.localeCompare(o):o.localeCompare(r)}))}},904:function(e,t){function a(e,t){for(var a=0,n=e.length,r;a<n&&!1!==(r=t(e[a],a));a++);}function n(e){return"[object Array]"===Object.prototype.toString.apply(e)}function r(e){return"function"==typeof e}e.exports={isFunction:r,isArray:n,each:a}},912:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enquireScreen=o;var n=void 0;if("undefined"!=typeof window){var r=function e(t){return{media:t,matches:!1,addListener:function e(){},removeListener:function e(){}}};window.matchMedia=window.matchMedia||r,n=a(913)}function o(e,t){n&&n.register(t||"only screen and (max-width: 767.99px)",{match:function t(){e&&e(!0)},unmatch:function t(){e&&e()}})}var i=t.enquire=n},913:function(e,t,a){var n=a(914);e.exports=new n},914:function(e,t,a){var n=a(915),r=a(904),o=r.each,i=r.isFunction,l=r.isArray;function c(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}c.prototype={constructor:c,register:function(e,t,a){var r=this.queries,c=a&&this.browserIsIncapable;return r[e]||(r[e]=new n(e,c)),i(t)&&(t={match:t}),l(t)||(t=[t]),o(t,(function(t){i(t)&&(t={match:t}),r[e].addHandler(t)})),this},unregister:function(e,t){var a=this.queries[e];return a&&(t?a.removeHandler(t):(a.clear(),delete this.queries[e])),this}},e.exports=c},915:function(e,t,a){var n=a(916),r=a(904).each;function o(e,t){this.query=e,this.isUnconditional=t,this.handlers=[],this.mql=window.matchMedia(e);var a=this;this.listener=function(e){a.mql=e.currentTarget||e,a.assess()},this.mql.addListener(this.listener)}o.prototype={constuctor:o,addHandler:function(e){var t=new n(e);this.handlers.push(t),this.matches()&&t.on()},removeHandler:function(e){var t=this.handlers;r(t,(function(a,n){if(a.equals(e))return a.destroy(),!t.splice(n,1)}))},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){r(this.handlers,(function(e){e.destroy()})),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var e=this.matches()?"on":"off";r(this.handlers,(function(t){t[e]()}))}},e.exports=o},916:function(e,t){function a(e){this.options=e,!e.deferSetup&&this.setup()}a.prototype={constructor:a,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(e){return this.options===e||this.options.match===e}},e.exports=a},974:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(68),i=a.n(o),l=a(158),c=a(199),s=a(22),u=a(62),m=a(20),f=a(38),p=a(12),d=a(156),h=a(69),y=a(82),b=a(21),g=a(157),v=a(83),E=a(24),O=a(367),w=a(270),D=a(896),S=a(89),j=a(42),k=a(200),C=a(88),T=a(90),P=a(16),R=a(133),F=a(47),L=a(13),x=a(912);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){B(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function B(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function M(e,t,a){return t&&I(e.prototype,t),a&&I(e,a),e}function U(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}function W(e,t){return(W=Object.setPrototypeOf||function e(t,a){return t.__proto__=a,t})(e,t)}function H(e){var t=V();return function a(){var n=Z(e),r;if(t){var o=Z(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return J(this,r)}}function J(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?K(e):t}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var z=F.a.Row,$=F.a.Col,G={topicName:"",partition:10,replication:3,ttl:16,comments:"",location:"ALL"},Q=function(e){U(a,e);var t=H(a);function a(e){var n;return A(this,a),(n=t.call(this,e)).componentWillUnmount=function(){n.mounted=!1},n.enquireScreenRegister=function(){var e="only screen and (max-width: 720px)";Object(x.enquireScreen)((function(e){n.mounted&&n.setState({isMobile:e})}),e)},n.checkComments=function(e,t,a){""===t.trim()?a("comments is required"):a()},n.checkTopicName=function(e,t,a){var n=/^[0-9a-zA-Z\.\-_]{3,100}$/;""===t.trim()?a("topicName is required"):n.test(t)?a():a("topicName can only consist of letters, numbers, underscores, dashes, and dots, and the length is between 3-100")},n.handelDialog=function(){n.setState({createTaskLoading:!1}),n.props.handelDialog()},n.onCreateTaskLoading=function(){n.setState({createTaskLoading:!n.state.createTaskLoading})},n.onOk=function(){n.refForm.validateAll((function(e){e||n.setState({createTaskLoading:!0},(function(){var e=JSON.parse(JSON.stringify(n.state.value));E.a.post("/topic/task/add",e).then((function(e){200===e.data.code?(n.handelDialog(),n.props.fetchData(),b.a.success(e.data.message)):(n.onCreateTaskLoading(),b.a.error(e.data.message))})).catch((function(){n.onCreateTaskLoading(),b.a.error("Create Task has error.")}))}))}))},n.onFormChange=function(e){n.setState({value:e})},n.state={visible:n.props.visible,value:G,topicCreateSelectTeamData:n.props.topicCreateSelectTeamData,taskConfig:n.props.taskConfig,isMobile:!1,createTaskLoading:!1},n}return M(a,[{key:"componentDidMount",value:function e(){this.enquireScreenRegister()}},{key:"componentWillMount",value:function e(){this.mounted=!0}},{key:"componentWillReceiveProps",value:function e(t){t.visible&&this.setState({value:{topicName:"",producer:"",consumer:"",partition:10,replication:3,ttl:t.taskConfig.ttl,comments:"",location:"ALL"},taskConfig:t.taskConfig,topicCreateSelectTeamData:t.topicCreateSelectTeamData}),this.setState({visible:t.visible,topicCreateSelectTeamData:t.topicCreateSelectTeamData})}},{key:"render",value:function e(){var t=this,a=this.state.isMobile,n=N({},X.simpleFormDialog);a&&(n.width="300px");var o={children:"OK"},i={children:"Cancel"};return r.a.createElement(v.a,{className:"simple-form-dialog",style:n,autoFocus:!1,footerAlign:"center",title:"Topic Task",onOk:this.onOk,onCancel:this.handelDialog,onClose:this.handelDialog,isFullScreen:!0,okProps:o,cancelProps:i,visible:this.state.visible},r.a.createElement(L.FormBinderWrapper,{ref:function e(a){t.refForm=a},value:this.state.value,onChange:this.onFormChange},r.a.createElement("div",{style:X.dialogContent},r.a.createElement(j.a,{visible:this.state.createTaskLoading,style:{width:"100%"}},r.a.createElement(z,{style:X.formRow},r.a.createElement($,{span:"".concat(a?"6":"4")},r.a.createElement("label",{style:X.formLabel},"Topic Name:")),r.a.createElement($,{span:"".concat(a?"18":"16")},r.a.createElement(L.FormBinder,{name:"topicName",required:!0,min:2,max:50,validator:this.checkTopicName},r.a.createElement(P.a,{style:X.input,placeholder:""})),r.a.createElement(L.FormError,{name:"topicName"}))),r.a.createElement(z,{style:X.formRow},r.a.createElement($,{span:"".concat(a?"6":"4")},r.a.createElement("label",{style:X.formLabel},"Team Name:")),r.a.createElement($,{span:"".concat(a?"18":"16")},r.a.createElement(L.FormBinder,{name:"teamId",required:!0},r.a.createElement(h.a,{showSearch:!0,dataSource:this.state.topicCreateSelectTeamData,placeholder:"please select team",style:{width:"100%"}})),r.a.createElement(L.FormError,{name:"teamId"}))),r.a.createElement(z,{style:X.formRow},r.a.createElement($,{span:"".concat(a?"6":"4")},r.a.createElement("label",{style:X.formLabel},"Location:")),r.a.createElement($,{span:"".concat(a?"18":"16")},r.a.createElement(L.FormBinder,{name:"location",required:!0},r.a.createElement(h.a,{showSearch:!0,dataSource:this.state.taskConfig.remoteLocations,placeholder:"please select location",style:{width:"100%"}})),r.a.createElement(L.FormError,{name:"location"}))),r.a.createElement(z,{style:X.formRow},r.a.createElement($,{span:"".concat(a?"6":"4")},r.a.createElement("label",{style:X.formLabel},"Message Rate:")),r.a.createElement($,{span:"".concat(a?"18":"16")},r.a.createElement(L.FormBinder,{name:"messageRate",required:!0},r.a.createElement(C.a,{step:50,min:1})),r.a.createElement(L.FormError,{name:"messageRate"}),"\xa0\xa0(message/s)")),r.a.createElement(z,{style:X.formRow},r.a.createElement($,{span:"".concat(a?"6":"4")},r.a.createElement("label",{style:X.formLabel},"Partitions:")),r.a.createElement($,null,r.a.createElement(L.FormBinder,{name:"partition",required:!0},r.a.createElement(C.a,{min:1})),r.a.createElement(L.FormError,{name:"partition"}))),r.a.createElement(z,{style:X.formRow},r.a.createElement($,{span:"".concat(a?"6":"4")},r.a.createElement("label",{style:X.formLabel},"Replication Factor:")),r.a.createElement($,null,r.a.createElement(L.FormBinder,{name:"replication",required:!0},r.a.createElement(C.a,{min:1,max:10})),r.a.createElement(L.FormError,{name:"replication"}))),r.a.createElement(z,{style:X.formRow},r.a.createElement($,{span:"".concat(a?"6":"4")},r.a.createElement("label",{style:X.formLabel},"TTL:")),r.a.createElement($,null,r.a.createElement(L.FormBinder,{name:"ttl",required:!0},r.a.createElement(C.a,{min:1})),r.a.createElement(L.FormError,{name:"ttl"}),"\xa0\xa0(H)")),r.a.createElement(z,{style:X.formRow},r.a.createElement($,null,r.a.createElement(L.FormBinder,{name:"comments",required:!0,validator:this.checkComments},r.a.createElement(P.a.TextArea,{style:X.input,placeholder:"Enter comments",rows:4})),r.a.createElement(L.FormError,{name:"comments"})))))))}}]),a}(n.Component);Q.displayName="FormDialog";var X={simpleFormDialog:{width:"640px"},dialogContent:{},formRow:{marginTop:20},input:{width:"100%"},formLabel:{lineHeight:"26px"}};function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(a),!0).forEach((function(t){ae(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ee(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ae(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oe(e,t,a){return t&&re(e.prototype,t),a&&re(e,a),e}function ie(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}function le(e,t){return(le=Object.setPrototypeOf||function e(t,a){return t.__proto__=a,t})(e,t)}function ce(e){var t=me();return function a(){var n=fe(e),r;if(t){var o=fe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return se(this,r)}}function se(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?ue(e):t}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var pe=function(e){ie(a,e);var t=ce(a);function a(e){var n;return ne(this,a),(n=t.call(this,e)).hideDetailDialog=function(){n.props.hideDetailDialog()},n.onOk=function(){n.hideDetailDialog()},n.state={dialogObj:n.props.dialogObj},n}return oe(a,[{key:"componentWillReceiveProps",value:function e(t){this.setState({dialogObj:t.dialogObj})}},{key:"render",value:function e(){var t=te({},de.simpleFormDialog),a={children:"OK"},n={children:"Cancel"};return r.a.createElement(v.a,{className:"simple-form-dialog",style:t,autoFocus:!1,footerAlign:"center",onOk:this.onOk,onCancel:this.hideDetailDialog,onClose:this.hideDetailDialog,isFullScreen:!0,okProps:a,cancelProps:n,visible:this.state.dialogObj.visible},r.a.createElement("div",{className:"detail-table"},r.a.createElement(i.a,{title:"Topic Task"},r.a.createElement("ul",{style:de.detailTable},r.a.createElement("li",{style:de.detailItem},r.a.createElement("div",{style:de.detailTitle},"Topic Name:"),r.a.createElement("div",{style:de.detailBody},this.state.dialogObj.record.topicName)),r.a.createElement("li",{style:de.detailItem},r.a.createElement("div",{style:de.detailTitle},"Location:"),r.a.createElement("div",{style:de.detailBody},this.state.dialogObj.record.location)),r.a.createElement("li",{style:de.detailItem},r.a.createElement("div",{style:de.detailTitle},"Kakfka Cluster:"),r.a.createElement("div",{style:de.detailBody},this.state.dialogObj.record.clusterNames)),r.a.createElement("li",{style:de.detailItem},r.a.createElement("div",{style:de.detailTitle},"Owner:"),r.a.createElement("div",{style:de.detailBody},this.state.dialogObj.record.owner?this.state.dialogObj.record.owner.name:"")),r.a.createElement("li",{style:de.detailItem},r.a.createElement("div",{style:de.detailTitle},"Team:"),r.a.createElement("div",{style:de.detailBody},this.state.dialogObj.record.team?this.state.dialogObj.record.team.name:"")),r.a.createElement("li",{style:de.detailItem},r.a.createElement("div",{style:de.detailTitle},"Message Rate:"),r.a.createElement("div",{style:de.detailBody},this.state.dialogObj.record.messageRate)),r.a.createElement("li",{style:de.detailItem},r.a.createElement("div",{style:de.detailTitle},"TTL:"),r.a.createElement("div",{style:de.detailBody},this.state.dialogObj.record.ttl,"\xa0(hour)")),r.a.createElement("li",{style:de.detailItem},r.a.createElement("div",{style:de.detailTitle},"Partitions:"),r.a.createElement("div",{style:de.detailBody},this.state.dialogObj.record.partition)),r.a.createElement("li",{style:de.detailItem},r.a.createElement("div",{style:de.detailTitle},"Replication Factor:"),r.a.createElement("div",{style:de.detailBody},this.state.dialogObj.record.replication)),r.a.createElement("li",{style:de.detailItem},r.a.createElement("div",{style:de.detailTitle},"Comments:"),r.a.createElement("div",{style:de.detailBody},this.state.dialogObj.record.comments)),""!==this.state.dialogObj.record.approvalOpinions?r.a.createElement("li",{style:de.detailItem},r.a.createElement("div",{style:de.detailTitle},"Approval Opinion:"),r.a.createElement("div",{style:de.detailBody},this.state.dialogObj.record.approvalOpinions)):""))))}}]),a}(n.Component);pe.displayName="DetailDialog";var de={simpleFormDialog:{width:"640px"},detailItem:{padding:"15px 0px",display:"flex",borderTop:"1px solid #EEEFF3"},detailTitle:{marginRight:"30px",textAlign:"right",width:"120px",color:"#999999"},detailBody:{flex:1}};function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function be(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(a),!0).forEach((function(t){ge(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ye(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ge(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Oe(e,t,a){return t&&Ee(e.prototype,t),a&&Ee(e,a),e}function we(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}function De(e,t){return(De=Object.setPrototypeOf||function e(t,a){return t.__proto__=a,t})(e,t)}function Se(e){var t=Ce();return function a(){var n=Te(e),r;if(t){var o=Te(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return je(this,r)}}function je(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?ke(e):t}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ce(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var Pe=F.a.Row,Re=F.a.Col,Fe=function(e){we(a,e);var t=Se(a);function a(e){var n;return ve(this,a),(n=t.call(this,e)).componentWillUnmount=function(){n.mounted=!1},n.hideUpdateDialog=function(){n.setState({editTaskLoading:!1}),n.props.hideUpdateDialog()},n.handelDialog=function(){E.a.get("/team/userteam").then((function(e){200===e.data.code&&void 0!==e.data.data&&e.data.data.length>0&&n.setState({topicCreateSelectTeamData:e.data.data})})).catch((function(e){console.log(e)}))},n.checkComments=function(e,t,a){""===t.trim()?a("comments is required"):a()},n.onFormChange=function(e){n.setState({value:e})},n.onEditTaskLoading=function(){n.setState({editTaskLoading:!n.state.editTaskLoading})},n.onOk=function(){n.refForm.validateAll((function(e){e||n.setState({editTaskLoading:!0},(function(){var e=JSON.parse(JSON.stringify(n.state.value));e.clusterIds=e.clusterIds.toString(),E.a.put("/topic/task/update",e).then((function(e){200===e.data.code?(n.hideUpdateDialog(),n.props.fetchData(),b.a.success(e.data.message)):(n.onEditTaskLoading(),b.a.error(e.data.message))})).catch((function(){n.onEditTaskLoading(),b.a.error("Create Task has error.")}))}))}))},n.state={value:{},topicCreateSelectTeamData:[],updateObjDialog:n.props.updateObjDialog,taskConfig:n.props.taskConfig,editTaskLoading:!1},n}return Oe(a,[{key:"componentDidMount",value:function e(){this.handelDialog()}},{key:"componentWillMount",value:function e(){this.mounted=!0}},{key:"componentWillReceiveProps",value:function e(t){this.setState({updateObjDialog:t.updateObjDialog,taskConfig:t.taskConfig}),t.updateObjDialog.visible&&this.setState({value:{approved:0,approvalOpinions:t.updateObjDialog.record.approvalOpinions,id:t.updateObjDialog.record.id,clusterIds:[],topicName:t.updateObjDialog.record.topicName,producer:"",consumer:"",partition:t.updateObjDialog.record.partition,replication:t.updateObjDialog.record.replication,ttl:t.updateObjDialog.record.ttl,comments:t.updateObjDialog.record.comments,messageRate:t.updateObjDialog.record.messageRate}})}},{key:"render",value:function e(){var t=this,a=this.state.isMobile,n=be({},Le.simpleFormDialog),o={children:"OK"},i={children:"Cancel"};return r.a.createElement(v.a,{className:"simple-form-dialog",style:n,autoFocus:!1,footerAlign:"center",title:"Topic Task",isFullScreen:!0,onOk:this.onOk,onCancel:this.hideUpdateDialog,onClose:this.hideUpdateDialog,okProps:o,cancelProps:i,visible:this.state.updateObjDialog.visible},r.a.createElement(L.FormBinderWrapper,{ref:function e(a){t.refForm=a},value:this.state.value,onChange:this.onFormChange},r.a.createElement("div",{style:Le.dialogContent},r.a.createElement(j.a,{visible:this.state.editTaskLoading,style:{width:"100%"}},r.a.createElement(Pe,{style:Le.formRow},r.a.createElement(Re,{span:"".concat(a?"6":"4")},r.a.createElement("label",{style:Le.formLabel},"Approval Opinion:")),r.a.createElement(Re,{span:"".concat(a?"18":"16")},r.a.createElement("label",{style:Le.warnLabel},this.state.value.approvalOpinions))),r.a.createElement(Pe,{style:Le.formRow},r.a.createElement(Re,{span:"".concat(a?"6":"4")},r.a.createElement("label",{style:Le.formLabel},"Topic Name:")),r.a.createElement(Re,{span:"".concat(a?"18":"16")},r.a.createElement(L.FormBinder,{name:"topicName",required:!0,min:2,max:50},r.a.createElement(P.a,{style:Le.input,placeholder:""})),r.a.createElement(L.FormError,{name:"topicName"}))),r.a.createElement(Pe,{style:Le.formRow},r.a.createElement(Re,{span:"".concat(a?"6":"4")},r.a.createElement("label",{style:Le.formLabel},"Team Name:")),r.a.createElement(Re,{span:"".concat(a?"18":"16")},r.a.createElement(L.FormBinder,{name:"teamId",required:!0},r.a.createElement(h.a,{showSearch:!0,dataSource:this.state.topicCreateSelectTeamData,placeholder:"please select team",style:{width:"100%"}})),r.a.createElement(L.FormError,{name:"teamId"}))),r.a.createElement(Pe,{style:Le.formRow},r.a.createElement(Re,{span:"".concat(a?"6":"4")},r.a.createElement("label",{style:Le.formLabel},"Location:")),r.a.createElement(Re,{span:"".concat(a?"18":"16")},r.a.createElement(L.FormBinder,{name:"location",required:!0},r.a.createElement(h.a,{showSearch:!0,dataSource:this.state.taskConfig.remoteLocations,placeholder:"please select location",style:{width:"100%"}})),r.a.createElement(L.FormError,{name:"location"}))),r.a.createElement(Pe,{style:Le.formRow},r.a.createElement(Re,{span:"".concat(a?"6":"4")},r.a.createElement("label",{style:Le.formLabel},"Message Rate:")),r.a.createElement(Re,{span:"".concat(a?"18":"16")},r.a.createElement(L.FormBinder,{name:"messageRate",required:!0},r.a.createElement(C.a,{step:50,min:1})),r.a.createElement(L.FormError,{name:"messageRate"}),"\xa0\xa0(message/s)")),r.a.createElement(Pe,{style:Le.formRow},r.a.createElement(Re,{span:"".concat(a?"6":"4")},r.a.createElement("label",{style:Le.formLabel},"Partitions:")),r.a.createElement(Re,null,r.a.createElement(L.FormBinder,{name:"partition",required:!0},r.a.createElement(C.a,{min:1})),r.a.createElement(L.FormError,{name:"partition"}))),r.a.createElement(Pe,{style:Le.formRow},r.a.createElement(Re,{span:"".concat(a?"6":"4")},r.a.createElement("label",{style:Le.formLabel},"Replication Factor:")),r.a.createElement(Re,null,r.a.createElement(L.FormBinder,{name:"replication",required:!0},r.a.createElement(C.a,{min:1,max:10})),r.a.createElement(L.FormError,{name:"replication"}))),r.a.createElement(Pe,{style:Le.formRow},r.a.createElement(Re,{span:"".concat(a?"6":"4")},r.a.createElement("label",{style:Le.formLabel},"TTL:")),r.a.createElement(Re,null,r.a.createElement(L.FormBinder,{name:"ttl",required:!0},r.a.createElement(C.a,{min:1})),r.a.createElement(L.FormError,{name:"ttl"}),"\xa0\xa0(H)")),r.a.createElement(Pe,{style:Le.formRow},r.a.createElement(Re,null,r.a.createElement(L.FormBinder,{name:"comments",required:!0,validator:this.checkComments},r.a.createElement(P.a.TextArea,{style:Le.input,placeholder:"Enter comments",rows:4})),r.a.createElement(L.FormError,{name:"comments"})))))))}}]),a}(n.Component),Le={simpleFormDialog:{width:"640px"},dialogContent:{},formRow:{marginTop:20},input:{width:"100%"},formLabel:{lineHeight:"26px"},warnLabel:{lineHeight:"26px",color:"red"}};function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function _e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ne(e,t,a){return t&&qe(e.prototype,t),a&&qe(e,a),e}function Be(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}function Ae(e,t){return(Ae=Object.setPrototypeOf||function e(t,a){return t.__proto__=a,t})(e,t)}function Ie(e){var t=We();return function a(){var n=He(e),r;if(t){var o=He(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Me(this,r)}}function Me(e,t){return!t||"object"!==xe(t)&&"function"!=typeof t?Ue(e):t}function Ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function We(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var Je=[{value:"all",label:"All"},{value:"toApproval",label:"To Approval"},{value:"approved",label:"Approved"},{value:"reject",label:"Reject"}],Ke=function(e){Be(a,e);var t=Ie(a);function a(){var e;_e(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={isLoading:!1,visible:!1,dataSource:[],pageData:[],filterDataSource:[],filterValue:"all",dialogObj:{record:{},visible:!1},updateObjDialog:{record:{},visible:!1},topicCreateSelectTeamData:[],taskConfig:{remoteLocations:[],ttl:""}},e.componentWillUnmount=function(){e.mounted=!1},e.handelDialog=function(){e.setState({isLoading:!0},(function(){E.a.get("/team/userteam").then((function(t){200===t.data.code&&void 0!==t.data.data&&t.data.data.length>0?e.setState({isLoading:!1,visible:!e.state.visible,topicCreateSelectTeamData:t.data.data}):(e.setState({isLoading:!1}),v.a.alert({title:"Alert",content:t.data.message}))})).catch((function(t){e.setState({isLoading:!1}),console.log(t)}))}))},e.hideDetailDialog=function(){e.setState({dialogObj:{record:{},visible:!1}})},e.hideUpdateDialog=function(){e.setState({updateObjDialog:{record:{},visible:!1}})},e.renderStatus=function(e){var t=r.a.createElement("span",{style:{color:"#ffd700"}},"To Approval");switch(e){case 1:t=r.a.createElement("span",{style:{color:"#00a000"}},"Approve");break;case-1:t=r.a.createElement("span",{style:{color:"red"}},"Reject")}return r.a.createElement("div",null,t)},e.getTaskConfig=function(){E.a.get("/config").then((function(t){if(200===t.data.code){if(e.mounted){var a=e.state.taskConfig;a.remoteLocations=Object(D.c)(t.data.data.remotelocations,!0),a.ttl=t.data.data.ttl,e.setState({taskConfig:a})}}else b.a.error(t.data.message)})).catch((function(e){console.error(e)}))},e.fetchData=function(){e.setState({isLoading:!0},(function(){E.a.get("/topic/task/list").then((function(t){200===t.data.code?e.mounted&&(e.setState({dataSource:t.data.data,isLoading:!1,filterDataSource:t.data.data}),e.onfilter()):b.a.error(t.data.message)})).catch((function(e){console.log(e)}))}))},e.onfilter=function(){var t=e.state.dataSource,a=e.state.filterValue;"all"===a?t=e.state.dataSource:"toApproval"===a?t=t.filter((function(e){return 0===e.approved})):"reject"===a?t=t.filter((function(e){return-1===e.approved})):"approved"===a&&(t=t.filter((function(e){return 1===e.approved}))),e.setState({filterDataSource:t})},e.handelDetail=function(t){return function(){e.setState({dialogObj:{record:t,visible:!e.state.dialogObj.visible}})}},e.handleFilterChange=function(t){var a=e.state.dataSource;"all"===t?a=e.state.dataSource:"toApproval"===t?a=a.filter((function(e){return 0===e.approved})):"reject"===t?a=a.filter((function(e){return-1===e.approved})):"approved"===t&&(a=a.filter((function(e){return 1===e.approved}))),e.setState({filterDataSource:a,filterValue:t},(function(){e.onfilter()}))},e.redrawPageData=function(t){e.setState({pageData:t})},e.renderOper=function(t,a,n){return-1===n.approved?r.a.createElement("div",null,r.a.createElement("span",{title:"Detail"},r.a.createElement("a",{style:Ve.link,onClick:e.handelDetail(n)},"Detail")),r.a.createElement("span",{style:Ve.separator}),r.a.createElement("span",{title:"Delete"},r.a.createElement("a",{style:Ve.link,onClick:e.handleDelete(n)},"Delete")),r.a.createElement("span",{style:Ve.separator}),r.a.createElement("span",{title:"re-edit"},r.a.createElement("a",{style:Ve.link,onClick:e.handelUpdate(n)},"Edit"))):0===n.approved?r.a.createElement("div",null,r.a.createElement("span",{title:"Detail"},r.a.createElement("a",{style:Ve.link,onClick:e.handelDetail(n)},"Detail")),r.a.createElement("span",{style:Ve.separator}),r.a.createElement("span",{title:"Delete"},r.a.createElement("a",{style:Ve.link,onClick:e.handleDelete(n)},"Delete"))):r.a.createElement("div",null,r.a.createElement("span",{title:"Detail"},r.a.createElement("a",{style:Ve.link,onClick:e.handelDetail(n)},"Detail")))},e.handelUpdate=function(t){return function(){e.setState({updateObjDialog:{record:t,visible:!e.state.updateObjDialog.visible}})}},e.handleDelete=function(t){return function(){v.a.confirm({title:"Delete Task",content:"confirm delete this topic task: ".concat(t.topicName,"?"),onOk:function a(){return e.deleteTask(t.id)},okProps:{children:"OK"},cancelProps:{children:"Cancel"}})}},e.deleteTask=function(t){E.a.delete("/topic/task/".concat(t)).then((function(t){200===t.data.code?(b.a.success("Delete success"),e.fetchData()):b.a.error(t.data.message)})).catch((function(e){console.error(e)}))},e}return Ne(a,[{key:"componentDidMount",value:function e(){this.getTaskConfig(),this.fetchData()}},{key:"componentWillMount",value:function e(){this.mounted=!0}},{key:"onSort",value:function e(t,a){var n=[];n="approved"!==t?this.state.filterDataSource.sort((function(e,n){return e=e[t],n=n[t],"asc"===a?e.localeCompare(n):"desc"===a?n.localeCompare(e):void 0})):this.state.filterDataSource.sort((function(e,n){return"asc"===a?e[t]-n[t]:"desc"===a?n[t]-e[t]:void 0})),this.setState({filterDataSource:n})}},{key:"render",value:function e(){var t=this,a=this.state,n=a.isLoading,o=a.visible,i=a.dialogObj,l=a.taskConfig,c=a.updateObjDialog,u=a.topicCreateSelectTeamData,f=r.a.createElement(h.a,{showSearch:!0,dataSource:Je,placeholder:"please select cluster",style:{width:"300px"},onChange:function e(a){t.handleFilterChange(a)},value:this.state.filterValue}),d=r.a.createElement(m.a,{type:"secondary",onClick:this.handelDialog},r.a.createElement(p.a,{type:"add"}),"Create Topic Task");return r.a.createElement("div",null,r.a.createElement(pe,{dialogObj:i,hideDetailDialog:this.hideDetailDialog}),r.a.createElement(Q,{taskConfig:l,visible:o,handelDialog:this.handelDialog,fetchData:this.fetchData,topicCreateSelectTeamData:u}),r.a.createElement(Fe,{taskConfig:l,updateObjDialog:c,hideUpdateDialog:this.hideUpdateDialog,fetchData:this.fetchData}),r.a.createElement(O.a,{components:d,selecttext:"Filter",selectCompont:f}),r.a.createElement(s.a,{loading:n,dataSource:this.state.pageData,hasBorder:!1,isZebra:!0,onSort:function e(a,n){return t.onSort(a,n)}},r.a.createElement(s.a.Column,{title:"Topic Name",dataIndex:"topicName",sortable:!0,width:250}),r.a.createElement(s.a.Column,{title:"Location",dataIndex:"location",sortable:!0,width:250}),r.a.createElement(s.a.Column,{title:"Approval Status",dataIndex:"approved",width:200,cell:this.renderStatus,sortable:!0}),r.a.createElement(s.a.Column,{title:"Comments",dataIndex:"comments"}),r.a.createElement(s.a.Column,{title:"Operation",cell:this.renderOper,width:210})),r.a.createElement(w.a,{dataSource:this.state.filterDataSource,redrawPageData:this.redrawPageData}))}}]),a}(n.Component),Ve={link:{margin:"0 5px",color:"rgba(49, 128, 253, 0.65)",cursor:"pointer",textDecoration:"none"},separator:{margin:"0 8px",display:"inline-block",height:"12px",width:"1px",verticalAlign:"middle",background:"#e8e8e8"}};function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ge(e,t,a){return t&&$e(e.prototype,t),a&&$e(e,a),e}function Qe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}function Xe(e,t){return(Xe=Object.setPrototypeOf||function e(t,a){return t.__proto__=a,t})(e,t)}function Ye(e){var t=at();return function a(){var n=nt(e),r;if(t){var o=nt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return et(this,r)}}function et(e,t){return!t||"object"!==Ze(t)&&"function"!=typeof t?tt(e):t}function tt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function at(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var rt=function(e){Qe(a,e);var t=Ye(a);function a(){return ze(this,a),t.apply(this,arguments)}return Ge(a,[{key:"render",value:function e(){var t=[{link:"",text:"Topic"},{link:"",text:"My Task"}];return r.a.createElement("div",null,r.a.createElement(l.a,{items:t,title:"My Task"}),r.a.createElement(i.a,{style:ot.container},r.a.createElement(Ke,null)))}}]),a}(n.Component),ot={container:{margin:"20px",padding:"10px 20px 20px",minHeight:"600px"}},it=t.default=rt}}]);