(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{896:function(e,t,n){"use strict";n.d(t,"h",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"i",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return m})),n.d(t,"d",(function(){return d}));var a=n(898),r=n.n(a);function o(e){if(e>0){var t,n=parseFloat(e)/36e5;return Number.isInteger(n)?n:n.toFixed(2)}return 0}function i(e,t){var n=[];return e.toString().split(",").map((function(e){n.push({value:e,label:e})})),t&&n.push({value:"ALL",label:"ALL"}),n}function c(e){if(null!==e&&"null"!==e){var t=parseFloat(e.toString());return t<1e3?r()(t).format("0a"):r()(t).format("0.00a")}return"-"}function l(e,t,n){return 0===e?0:""!==n?"MessagesInPerSec"===n.metricName||"FailedProduceRequestsPerSec"===n.metricName||"FailedFetchRequestsPerSec"===n.metricName?c(e):r()(e).format("0.00b"):void 0}function s(e){return 0===e?"0 B":r()(e).format("0.00b")}function u(e){return r()(e).format("0,0")}function p(e,t){var n=[];return n=e.sort((function(e,n){return e=e[t],n=n[t],e.localeCompare(n)}))}function m(e,t,n){var a;return e.sort((function(e,a){return e=e[t],a=a[t],"asc"===n?e.localeCompare(a):a.localeCompare(e)}))}function d(e,t,n){var a;return e.sort((function(e,a){var r=e[t],o=a[t];return"number"==typeof r?n&&"asc"===n?r-o:o-r:n&&"asc"===n?r.localeCompare(o):o.localeCompare(r)}))}},899:function(e,t,n){"use strict";var a=n(38),r=n(62),o=n(905),i=n.n(o)},900:function(e,t,n){"use strict";var a=n(1),r=n.n(a),o=n(19);function i(e,t){return p(e)||u(e,t)||l(e,t)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function u(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i=e[Symbol.iterator](),c;!(a=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}}function p(e){if(Array.isArray(e))return e}function m(e){var t=e.children,n,a,c,l;return e.rolename===i(Object(o.useAuth)(),1)[0].role?t:r.a.createElement("div",null)}t.a=m},901:function(e,t,n){"use strict";var a=n(2),r=n.n(a),o=n(8),i=n.n(o),c=n(10),l=n(5),s=n.n(l),u=n(4),p=n.n(u),m=n(6),d=n.n(m),f=n(1),h=n.n(f),y=n(0),g=n.n(y),b=n(7),v=n.n(b),E,x,C=(x=E=function(e){function t(){return s()(this,t),p()(this,e.apply(this,arguments))}return d()(t,e),t.prototype.render=function e(){var t,n=this.props,a=n.prefix,r=n.title,o=n.subTitle,i=n.extra,c=n.showTitleBullet;if(!r)return null;var l=v()(((t={})[a+"card-head"]=!0,t[a+"card-head-show-bullet"]=c,t)),s=i?h.a.createElement("div",{className:a+"card-extra"},i):null;return h.a.createElement("div",{className:l},h.a.createElement("div",{className:a+"card-head-main"},h.a.createElement("div",{className:a+"card-title"},r,o?h.a.createElement("span",{className:a+"card-subtitle"},o):null),s))},t}(f.Component),E.propTypes={prefix:g.a.string,title:g.a.node,subTitle:g.a.node,showTitleBullet:g.a.bool,extra:g.a.node},E.defaultProps={prefix:"next-",showTitleBullet:!0},x);C.displayName="CardBulletHeader";var w=c.a.config(C,{componentName:"Card"}),S=n(11),P=n.n(S),N=n(12),O=n(20),T=n(29),I,k,j=(k=I=function(e){function t(n,a){s()(this,t);var r=p()(this,e.call(this,n,a));return r.handleToggle=function(){r.setState((function(e){return{expand:!e.expand}}))},r._contentRefHandler=function(e){r.content=e},r.saveFooter=function(e){r.footer=e},r.state={needMore:!1,expand:!1,contentHeight:"auto"},r}return d()(t,e),t.prototype.componentDidMount=function e(){this._setNeedMore(),this._setContentHeight()},t.prototype.componentDidUpdate=function e(){this._setContentHeight()},t.prototype._setNeedMore=function e(){var t=this.props.contentHeight,n=this._getNodeChildrenHeight(this.content);this.setState({needMore:"auto"!==t&&n>t})},t.prototype._setContentHeight=function e(){if(this.state.expand){var t=this._getNodeChildrenHeight(this.content);this.content.style.height=t+"px"}else{var n=P.a.findDOMNode(this.footer),a=this.props.contentHeight;n&&(a-=n.getBoundingClientRect().height),this.content.style.height=a+"px"}},t.prototype._getNodeChildrenHeight=function e(t){if(!t)return 0;var n=t.childNodes,a=n.length;if(!a)return 0;var r=n[a-1];return r.offsetTop+r.offsetHeight},t.prototype.render=function e(){var t=this.props,n=t.prefix,a=t.children,r=t.locale,o=this.state,i=o.needMore,c=o.expand;return h.a.createElement("div",{className:n+"card-body"},h.a.createElement("div",{className:n+"card-content",ref:this._contentRefHandler},a),i?h.a.createElement("div",{className:n+"card-footer",ref:this.saveFooter,onClick:this.handleToggle},h.a.createElement(O.a,{text:!0,type:"primary"},c?r.fold:r.expand,h.a.createElement(N.a,{type:"arrow-down",className:c?"expand":""}))):null)},t}(f.Component),I.propTypes={prefix:g.a.string,contentHeight:g.a.oneOfType([g.a.string,g.a.number]),locale:g.a.object,children:g.a.node},I.defaultProps={prefix:"next-",contentHeight:120,locale:T.a.Card},k);j.displayName="CardCollapseContent";var D=c.a.config(j,{componentName:"Card"}),H=n(3),R,_,B=H.i.warning,L=["video","audio","picture","iframe","img"],M=(_=R=function(e){function t(){return s()(this,t),p()(this,e.apply(this,arguments))}return d()(t,e),t.prototype.render=function e(){var t=this.props,n=t.prefix,a=t.style,o=t.className,c=t.component,l=t.image,s=t.src,u=i()(t,["prefix","style","className","component","image","src"]);"children"in u||Boolean(l||s)||B("either `children`, `image` or `src` prop must be specified.");var p=-1!==L.indexOf(c),m=!p&&l?r()({backgroundImage:'url("'+l+'")'},a):a;return h.a.createElement(c,r()({},u,{style:m,className:v()(n+"card-media",o),src:p?l||s:void 0}))},t}(f.Component),R.propTypes={prefix:g.a.string,component:g.a.elementType,image:g.a.string,src:g.a.string,style:g.a.object,className:g.a.string},R.defaultProps={prefix:"next-",component:"div",style:{}},_);M.displayName="CardMedia";var A=c.a.config(M),F,V,W=(V=F=function(e){function t(){return s()(this,t),p()(this,e.apply(this,arguments))}return d()(t,e),t.prototype.render=function e(){var t=this.props,n=t.prefix,a=t.component,o=t.className,c=i()(t,["prefix","component","className"]);return h.a.createElement(a,r()({},c,{className:v()(n+"card-actions",o)}))},t}(f.Component),F.propTypes={prefix:g.a.string,component:g.a.elementType,className:g.a.string},F.defaultProps={prefix:"next-",component:"div"},V);W.displayName="CardActions";var U=c.a.config(W),z,q,J=H.j.pickOthers,K=(q=z=function(e){function t(){return s()(this,t),p()(this,e.apply(this,arguments))}return d()(t,e),t.prototype.render=function e(){var n,a=this.props,o=a.prefix,i=a.className,c=a.title,l=a.subTitle,s=a.extra,u=a.showTitleBullet,p=a.showHeadDivider,m=a.children,d=a.rtl,f=a.contentHeight,y=a.free,g=a.actions,b=a.media,E=v()(((n={})[o+"card"]=!0,n[o+"card-free"]=y,n[o+"card-show-divider"]=p,n[o+"card-hide-divider"]=!p,n),i),x=J(Object.keys(t.propTypes),this.props);return x.dir=d?"rtl":void 0,h.a.createElement("div",r()({},x,{className:E}),b&&h.a.createElement(A,null,b),h.a.createElement(w,{title:c,subTitle:l,extra:s,showTitleBullet:u}),y?m:h.a.createElement(D,{contentHeight:f},m),g&&h.a.createElement(U,null,g))},t}(h.a.Component),z.displayName="Card",z.propTypes=r()({},c.a.propTypes,{prefix:g.a.string,rtl:g.a.bool,media:g.a.node,title:g.a.node,subTitle:g.a.node,actions:g.a.node,showTitleBullet:g.a.bool,showHeadDivider:g.a.bool,contentHeight:g.a.oneOfType([g.a.string,g.a.number]),extra:g.a.node,free:g.a.bool,className:g.a.string,children:g.a.node}),z.defaultProps={prefix:"next-",free:!1,showTitleBullet:!0,showHeadDivider:!0,contentHeight:120},q),G,Y;K.displayName="Card";var $=(Y=G=function(e){function t(){return s()(this,t),p()(this,e.apply(this,arguments))}return d()(t,e),t.prototype.render=function e(){var t=this.props,n=t.prefix,a=t.title,o=t.subTitle,c=t.extra,l=t.className,s=t.component,u=i()(t,["prefix","title","subTitle","extra","className","component"]);return h.a.createElement(s,r()({},u,{className:v()(n+"card-header",l)}),c&&h.a.createElement("div",{className:n+"card-header-extra"},c),h.a.createElement("div",{className:n+"card-header-titles"},a&&h.a.createElement("div",{className:n+"card-header-title"},a),o&&h.a.createElement("div",{className:n+"card-header-subtitle"},o)))},t}(f.Component),G.propTypes={prefix:g.a.string,title:g.a.node,subTitle:g.a.node,extra:g.a.node,component:g.a.elementType,className:g.a.string},G.defaultProps={prefix:"next-",component:"div"},Y);$.displayName="CardHeader";var Q=c.a.config($),X,Z,ee=(Z=X=function(e){function t(){return s()(this,t),p()(this,e.apply(this,arguments))}return d()(t,e),t.prototype.render=function e(){var t,n=this.props,a=n.prefix,o=n.component,c=n.inset,l=n.className,s=i()(n,["prefix","component","inset","className"]),u=v()(a+"card-divider",((t={})[a+"card-divider--inset"]=c,t),l);return h.a.createElement(o,r()({},s,{className:u}))},t}(f.Component),X.propTypes={prefix:g.a.string,component:g.a.elementType,inset:g.a.bool,className:g.a.string},X.defaultProps={prefix:"next-",component:"hr"},Z);ee.displayName="CardDivider";var te=c.a.config(ee),ne,ae,re=(ae=ne=function(e){function t(){return s()(this,t),p()(this,e.apply(this,arguments))}return d()(t,e),t.prototype.render=function e(){var t=this.props,n=t.prefix,a=t.className,o=t.component,c=i()(t,["prefix","className","component"]);return h.a.createElement(o,r()({},c,{className:v()(n+"card-content-container",a)}))},t}(f.Component),ne.propTypes={prefix:g.a.string,component:g.a.elementType,className:g.a.string},ne.defaultProps={prefix:"next-",component:"div"},ae);re.displayName="CardContent";var oe=c.a.config(re);K.Header=Q,K.Media=A,K.Divider=te,K.Content=oe,K.Actions=U,K.BulletHeader=w,K.CollaspeContent=D,K.CollapseContent=D;var ie=t.a=c.a.config(K,{transform:function e(t,n){if("titlePrefixLine"in t){n("titlePrefixLine","showTitleBullet","Card");var a=t,o=a.titlePrefixLine,c=i()(a,["titlePrefixLine"]);t=r()({showTitleBullet:o},c)}if("titleBottomLine"in t){n("titleBottomLine","showHeadDivider","Card");var l=t,s=l.titleBottomLine,u=i()(l,["titleBottomLine"]);t=r()({showHeadDivider:s},u)}if("bodyHeight"in t){n("bodyHeight","contentHeight","Card");var p=t,m=p.bodyHeight,d=i()(p,["bodyHeight"]);t=r()({contentHeight:m},d)}return t}})},905:function(e,t,n){},978:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(68),i=n.n(o),c=n(89),l=n(42),s=n(62),u=n(20),p=n(899),m=n(901),d=n(199),f=n(22),h=n(82),y=n(21),g=n(157),b=n(83),v=n(25),E=n(56),x=n.n(E),C=n(24),w=n(896),S=n(900),P=n(156),N=n(69),O=n(200),T=n(88),I=n(133),k=n(47),j=n(13);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function M(e,t,n){return t&&L(e.prototype,t),n&&L(e,n),e}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}function F(e,t){return(F=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function V(e){var t=z();return function n(){var a=q(e),r;if(t){var o=q(this).constructor;r=Reflect.construct(a,arguments,o)}else r=a.apply(this,arguments);return W(this,r)}}function W(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?U(e):t}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var J=k.a.Row,K=k.a.Col,G=function(e){A(n,e);var t=V(n);function n(){var e;B(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={formValue:e.props.data,isMobile:!1,partition:e.props.data.partition,replica:e.props.data.replica,brokerList:[],sureDialog:!1,errormess:""},e.fetchBrokers=function(){C.a.post("/manager/topic/broker_list",e.state.formValue).then((function(t){200===t.data.code&&e.setState({brokerList:t.data.data})})).catch((function(e){console.error(e)}))},e.onOk=function(){""===e.state.errormess&&e.form.validateAll((function(t){t||(e.state.formValue.partition>=50?e.setState({sureDialog:!0}):e.sureAddPartition())}))},e.handelDialog=function(){e.setState({errormess:""}),e.props.changeParationState()},e.closeSureDialog=function(){e.setState({errormess:"",sureDialog:!1})},e.sureAddPartition=function(){e.setState({errormess:"",sureDialog:!1});var t={};t.topicName=e.state.formValue.topicName,t.partition=e.state.formValue.partition,t.clusterId=e.state.formValue.clusterId,t.partitions=e.state.formValue.partitions.toString().replace("[").replace("]"),t.oldPartition=e.state.partition,C.a.post("/manager/topic/partition",t).then((function(t){200===t.data.code?(y.a.success(t.data.message),e.handelDialog(),e.props.refreshPage()):y.a.error(t.data.message)})).catch((function(e){console.error(e)}))},e.handelChange=function(t){t.toString().split(",").length<e.state.replica&&0!==t.toString().length?e.setState({errormess:"You must select broker than replica count"}):e.setState({errormess:""})},e}return M(n,[{key:"componentWillReceiveProps",value:function e(t){var n=t.visable;this.setState({visible:n,formValue:t.data,partition:t.data.partition,replica:t.data.replica},(function(){}))}},{key:"componentWillMount",value:function e(){this.fetchBrokers()}},{key:"render",value:function e(){var t=this,n=this.state.isMobile,a=R({},Y.simpleFormDialog);n&&(a.width="300px");var o={children:"OK"},i={children:"Cancel"};return r.a.createElement(b.a,{title:"Add Partitions",className:"simple-form-dialog",style:a,autoFocus:!1,footerAlign:"center",onOk:this.onOk,onCancel:this.handelDialog,onClose:this.handelDialog,isFullScreen:!0,visible:this.state.visible,okProps:o,cancelProps:i},r.a.createElement(b.a,{title:"Confirm the number of topics",visible:this.state.sureDialog,onCancel:this.closeSureDialog,onOk:this.sureAddPartition,onClose:this.closeSureDialog,okProps:o,cancelProps:i},"The number of topic partitions has exceeded 50"),r.a.createElement(j.FormBinderWrapper,{ref:function e(n){t.form=n},value:this.state.formValue,onChange:this.onFormChange},r.a.createElement("div",{style:Y.formContent},r.a.createElement(J,{style:Y.formItem},r.a.createElement(K,{span:"".concat("6"),style:Y.label},"Topic:"),r.a.createElement(K,{span:"".concat(n?"18":"16")},r.a.createElement(j.FormBinder,{name:"topicName"},r.a.createElement("span",{style:Y.inputItem},this.state.formValue.topicName)),r.a.createElement(j.FormError,{name:"topicName"}))),r.a.createElement(J,{style:Y.formItem},r.a.createElement(K,{span:"".concat("6"),style:Y.label},"Add to Partitions:"),r.a.createElement(K,{span:"".concat(n?"18":"16")},r.a.createElement(j.FormBinder,{name:"partition",validator:function e(n,a,r){var o=[];a<=t.state.partition&&o.push("Cannot add zero partitions topic"),r(o)}},r.a.createElement(T.a,{style:{width:"100%"}})),r.a.createElement(j.FormError,{name:"partition"}))),r.a.createElement(J,{style:Y.formItem},r.a.createElement(K,{span:"".concat("6"),style:Y.label},"Brokers:"),r.a.createElement(K,{span:"".concat(n?"18":"16")},r.a.createElement(j.FormBinder,{name:"partitions",required:!0,message:"Required"},r.a.createElement(N.a,{mode:"multiple",style:Y.inputItem,dataSource:this.state.brokerList,onChange:this.handelChange})),r.a.createElement("label",{style:Y.warnLabel},this.state.errormess),r.a.createElement(j.FormError,{name:"partitions"}))))))}}]),n}(a.Component),Y={container:{margin:"20px"},loading:{width:"100%",minHeight:"500px"},formContent:{alignItems:"center"},formItem:{alignItems:"center",position:"relative",marginTop:20},inputItem:{width:"100%"},simpleFormDialog:{width:"640px"},label:{textAlign:"left",paddingLeft:"5%",lineHeight:"26px"},warnLabel:{lineHeight:"26px",color:"red"}},$,Q;function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function te(e,t,n){return t&&ee(e.prototype,t),n&&ee(e,n),e}function ne(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}function ae(e,t){return(ae=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function re(e){var t=ce();return function n(){var a=le(e),r;if(t){var o=le(this).constructor;r=Reflect.construct(a,arguments,o)}else r=a.apply(this,arguments);return oe(this,r)}}function oe(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?ie(e):t}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ce(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var se=Object(v.withRouter)($=Q=function(e){ne(n,e);var t=re(n);function n(){var e;Z(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={configData:[],visable:!1,isMetricLoading:!1,metric:[],topicsummary:[],clusterName:""},e.fetchSummary=function(){var t={topicName:e.props.match.params.topic,clusterId:e.props.match.params.clusterId};C.a.post("/manager/topic/summary",t).then((function(t){200===t.data.code&&e.mounted&&e.setState({topicsummary:t.data.data})})).catch((function(e){console.error(e)}))},e.fetchCluster=function(){C.a.get("/cluster/get?id=".concat(e.props.match.params.clusterId)).then((function(t){200===t.data.code&&t.data.data&&e.mounted&&e.setState({clusterName:t.data.data.name})})).catch((function(e){console.error(e)}))},e.fetchData=function(){var t={topicName:e.props.match.params.topic,clusterId:e.props.match.params.clusterId};C.a.post("/manager/topic/config",t).then((function(t){200===t.data.code&&e.mounted&&e.recombinat(t.data.data)})).catch((function(e){console.error(e)}))},e.addPartitions=function(){e.setState({visable:!0})},e.deleteTopic=function(){b.a.confirm({title:"Delete",content:"Do you want to delete this topic?",okProps:{children:"OK"},cancelProps:{children:"Cancel"},onOk:function t(){var n={topicName:e.props.match.params.topic,clusterId:parseInt(e.props.match.params.clusterId,10)};C.a.post("/manager/delete/topic",n).then((function(t){200===t.data.code?(y.a.success(t.data.message),e.handleCancel()):y.a.error(t.data.message)})).catch((function(e){console.error(e)}))}})},e.refreshPage=function(){e.fetchSummary(),e.fetchData()},e.recombinat=function(t){var n=[];Object.keys(t).forEach((function(e,a){"config"===e&&(n=t[e])})),e.setState({configData:n})},e.changeParationState=function(){e.setState({visable:!e.state.visable})},e.updateConfig=function(){e.props.history.push("/cluster/topic/config/".concat(e.props.match.params.clusterId,"/").concat(e.props.match.params.clusterName,"/").concat(e.props.match.params.topic))},e.fetchMetric=function(){var t={topic:e.props.match.params.topic,clusterID:e.props.match.params.clusterId};e.setState({isMetricLoading:!0},(function(){C.a.defaults.timeout=18e4,C.a.post("/monitor/topic/consumer_offsets/topic_metric",t).then((function(t){200===t.data.code&&(t.data.data?e.mounted&&e.setState({metric:t.data.data,isMetricLoading:!1}):e.setState({isMetricLoading:!1}))})).catch((function(e){console.error(e)}))}))},e.handleCancel=function(){e.props.history.push("/cluster/".concat(e.props.match.params.clusterId,"/").concat(e.props.match.params.clusterName,"/topic"))},e}return te(n,[{key:"componentWillMount",value:function e(){this.mounted=!0,this.fetchCluster(),this.fetchMetric(),this.fetchSummary(),this.fetchData()}},{key:"componentWillUnmount",value:function e(){this.mounted=!1}},{key:"render",value:function e(){var t=this,n=this.state.configData,a={topicName:this.props.match.params.topic,clusterId:this.props.match.params.clusterId},o=0;this.state.topicsummary.summary&&this.state.topicsummary.summary.forEach((function(e){"replication"===e.name&&(o=e.value)})),this.state.topicsummary.partition&&(a.partition=Object.keys(this.state.topicsummary.partition).length,a.replica=o);var c=function e(t,n,a){return"true"===t?r.a.createElement("font",{style:{backgroundColor:"#ffeeba"}},t):t};return r.a.createElement("div",null,r.a.createElement(i.a,{style:ue.container},r.a.createElement("div",null,r.a.createElement(G,{visable:this.state.visable,data:a,changeParationState:this.changeParationState,refreshPage:this.refreshPage}),r.a.createElement("div",{style:ue.listTitle},r.a.createElement(x.a,{onClick:function e(){return t.handleCancel()},style:ue.backward,size:"large",type:"backward"}),"cluster:\xa0",r.a.createElement("span",{style:ue.listTitles},this.state.clusterName," "),"\xa0\xa0topic:\xa0",r.a.createElement("span",{style:ue.listTitles},this.props.match.params.topic)),r.a.createElement(m.a,{style:ue.card,contentHeight:"auto"},r.a.createElement("div",{style:ue.title},"Topic Summary"),r.a.createElement(f.a,{dataSource:this.state.topicsummary.summary,hasHeader:!1},r.a.createElement(f.a.Column,{dataIndex:"name",width:150}),r.a.createElement(f.a.Column,{dataIndex:"value",width:150})),r.a.createElement("p",null)),r.a.createElement(S.a,{rolename:"admin"},r.a.createElement(m.a,{title:"Operations",style:ue.cards,contentHeight:"auto"},r.a.createElement(u.a,{type:"secondary",onClick:this.deleteTopic,style:ue.button},"Delete Topic"),"\xa0\xa0\xa0",r.a.createElement(u.a,{type:"secondary",style:ue.button,disabled:!0}," Reassign Partitions "),"\xa0\xa0\xa0",r.a.createElement(u.a,{type:"secondary",style:ue.button,disabled:!0},"Generate Partition Assignments"),r.a.createElement("br",null),r.a.createElement(u.a,{type:"secondary",onClick:this.addPartitions,style:ue.button},"Add Partitions"),"\xa0\xa0\xa0",r.a.createElement(u.a,{type:"secondary",onClick:this.updateConfig,style:ue.button},"Update Config"),"\xa0\xa0\xa0",r.a.createElement(u.a,{type:"secondary",style:ue.button,disabled:!0},"Manual Partition Assignments"))),r.a.createElement(m.a,{title:"Partitions by Broker",style:ue.cards,contentHeight:"auto"},r.a.createElement(f.a,{dataSource:this.state.topicsummary.broker},r.a.createElement(f.a.Column,{title:"Broker",dataIndex:"broker",width:50}),r.a.createElement(f.a.Column,{title:"# of Partitions",dataIndex:"partitions",width:50}),r.a.createElement(f.a.Column,{title:"# as Leader",dataIndex:"leaderCount",width:50}),r.a.createElement(f.a.Column,{title:"Partitions",dataIndex:"partition",width:100}),r.a.createElement(f.a.Column,{title:"Skewed?",dataIndex:"Skewed",width:100,cell:c}),r.a.createElement(f.a.Column,{title:"Leader Skewed?",dataIndex:"LeaderSkewed",width:100,cell:c})),r.a.createElement("div",{style:ue.title},"Topic Config"),r.a.createElement(f.a,{dataSource:n,hasHeader:!1},r.a.createElement(f.a.Column,{dataIndex:"config",width:150}),r.a.createElement(f.a.Column,{dataIndex:"value",width:150}))),r.a.createElement(m.a,{title:"Metric",style:ue.metriCard,contentHeight:"auto"},r.a.createElement(l.a,{visible:this.state.isMetricLoading,style:ue.loading},r.a.createElement(f.a,{dataSource:this.state.metric},r.a.createElement(f.a.Column,{title:"Rate",dataIndex:"metricName"}),r.a.createElement(f.a.Column,{title:"Mean",dataIndex:"meanRate",cell:w.b}),r.a.createElement(f.a.Column,{title:"1 min",dataIndex:"oneMinuteRate",cell:w.b}),r.a.createElement(f.a.Column,{title:"5 min",dataIndex:"fiveMinuteRate",cell:w.b}),r.a.createElement(f.a.Column,{title:"15 min",dataIndex:"fifteenMinuteRate",cell:w.b})))),r.a.createElement(m.a,{title:"Partition Information",contentHeight:"auto",style:ue.cardPartition},r.a.createElement(f.a,{dataSource:this.state.topicsummary.partition},r.a.createElement(f.a.Column,{title:"Partition",dataIndex:"partition",width:100}),r.a.createElement(f.a.Column,{title:"Leader",dataIndex:"leader",width:100}),r.a.createElement(f.a.Column,{title:"Replicas",dataIndex:"replicas",width:150}),r.a.createElement(f.a.Column,{title:"In Sync Replicas",dataIndex:"InSyncReplicas",width:150}),r.a.createElement(f.a.Column,{title:"Preferred Leader?",dataIndex:"Preferred_Leader",width:150}),r.a.createElement(f.a.Column,{title:"Under Replicated?",dataIndex:"Under_Replicated",width:150}))))))}}]),n}(a.Component))||$,ue={title:{fontSize:"18px",marginTop:"10px"},card:{width:"50%",height:"100%",float:"left",marginTop:"0px !important"},cards:{width:"50%",height:"100%",float:"right",marginTop:"0px !important"},cardPartition:{width:"100%",height:"100%"},button:{marginBottom:"10px",marginRight:"5px"},loading:{width:"100%"},backward:{display:"inline-block",minWidth:"40px",cursor:"pointer",color:"#0066FF"},listTitle:{marginBottom:"10px",fontSize:"30px"},listTitles:{marginBottom:"10px",fontSize:"30px",fontWeight:"bold"},metriCard:{width:"50%",height:"100%"}};function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function de(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function fe(e,t,n){return t&&de(e.prototype,t),n&&de(e,n),e}function he(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}function ye(e,t){return(ye=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function ge(e){var t=Ee();return function n(){var a=xe(e),r;if(t){var o=xe(this).constructor;r=Reflect.construct(a,arguments,o)}else r=a.apply(this,arguments);return be(this,r)}}function be(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?ve(e):t}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ee(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var Ce=function(e){he(n,e);var t=ge(n);function n(){return me(this,n),t.apply(this,arguments)}return fe(n,[{key:"render",value:function e(){return r.a.createElement("div",null,r.a.createElement(i.a,{style:we.container},r.a.createElement(se,null)))}}]),n}(a.Component),we={container:{margin:"20px",padding:"10px 20px 20px"}},Se=t.default=Ce}}]);