(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{896:function(e,t,r){"use strict";r.d(t,"h",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"i",(function(){return l})),r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return s})),r.d(t,"g",(function(){return u})),r.d(t,"e",(function(){return f})),r.d(t,"f",(function(){return p})),r.d(t,"d",(function(){return d}));var a=r(898),n=r.n(a);function o(e){if(e>0){var t,r=parseFloat(e)/36e5;return Number.isInteger(r)?r:r.toFixed(2)}return 0}function i(e,t){var r=[];return e.toString().split(",").map((function(e){r.push({value:e,label:e})})),t&&r.push({value:"ALL",label:"ALL"}),r}function l(e){if(null!==e&&"null"!==e){var t=parseFloat(e.toString());return t<1e3?n()(t).format("0a"):n()(t).format("0.00a")}return"-"}function c(e,t,r){return 0===e?0:""!==r?"MessagesInPerSec"===r.metricName||"FailedProduceRequestsPerSec"===r.metricName||"FailedFetchRequestsPerSec"===r.metricName?l(e):n()(e).format("0.00b"):void 0}function s(e){return 0===e?"0 B":n()(e).format("0.00b")}function u(e){return n()(e).format("0,0")}function f(e,t){var r=[];return r=e.sort((function(e,r){return e=e[t],r=r[t],e.localeCompare(r)}))}function p(e,t,r){var a;return e.sort((function(e,a){return e=e[t],a=a[t],"asc"===r?e.localeCompare(a):a.localeCompare(e)}))}function d(e,t,r){var a;return e.sort((function(e,a){var n=e[t],o=a[t];return"number"==typeof n?r&&"asc"===r?n-o:o-n:r&&"asc"===r?n.localeCompare(o):o.localeCompare(n)}))}},897:function(e,t,r){"use strict";var a=r(383),n=r(271),o=r(38),i=r(12),l=r(90),c=r(16),s=r(156),u=r(69),f=r(82),p=r(21),d=r(133),m=r(47),h=r(1),y=r.n(h),b=r(24),v=r(91);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function w(e,t,r){return t&&S(e.prototype,t),r&&S(e,r),e}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}function D(e,t){return(D=Object.setPrototypeOf||function e(t,r){return t.__proto__=r,t})(e,t)}function j(e){var t=F();return function r(){var a=T(e),n;if(t){var o=T(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return C(this,n)}}function C(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var P=m.a.Row,R=m.a.Col,x=function(e){O(r,e);var t=j(r);function r(e){var a;E(this,r),(a=t.call(this,e)).componentWillUnmount=function(){a.mounted=!1},a.arrayIsEqual=function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var r=0;r<e.length;r+=1){var a=JSON.stringify(e[r]),n=JSON.stringify(t[r]);if(0!==a.localeCompare(n))return!1}return!0},a.refreshTableData=function(e){a.props.refreshTableData(e)},a.getCluster=function(){var e=[{value:"-1",label:"ALL"}];b.a.get("/cluster").then((function(t){if(200===t.data.code){var r=t.data.data[0].id,n=t.data.data[0].name,o=a.state.clusterValue;t.data.data.forEach((function(t){t.id<r&&(r=t.id,n=t.name),e.push({value:t.id,label:t.name})}));var i=Object(v.a)(a.props.id).id;if(null!=i?a.props.refreshDataSource(i):a.props.refreshDataSource(r),void 0===o&&"settingUser"!==a.props.id&&"settingTeam"!==a.props.id){var l={id:r,cluster:n,isAll:!1};Object(v.d)(a.props.id,l),o=n}a.setState({clusterSelectData:e,clusterValue:o})}})).catch((function(e){console.error("error",e),void 0!==e.response&&void 0!==e.response.status&&""!==e.response.status&&null!=e.response.status&&null!=e.response.status&&(401===e.response.status?p.a.error({content:"Please login!",closeable:!0}):p.a.error({content:"get cluster faily!",duration:1e4,closeable:!0}))}))},a.handleClusterFilterChange=function(e,t){a.props.refreshDataSource(t.value);var r=a.state.dataSource;e=t.label.toString();var n={id:t.value,cluster:t.label,isAll:!1};"-1"===t.value&&(n.isAll=!0),Object(v.d)(a.props.id,n);var o=a.filterByPara(r,a.state.clusterField,e,a.state.searchField,a.state.searchValue,a.state.switchField,a.state.switchValue);a.setState({clusterValue:e}),a.refreshTableData(o)},a.handleFilterChange=function(e){e=e.toString();var t=a.state.dataSource,r=a.filterByPara(t,a.state.clusterField,a.state.clusterValue,a.state.searchField,e,a.state.switchField,a.state.switchValue);a.setState({searchValue:e}),a.refreshTableData(r),a.setSesion("".concat(a.props.id,"Search"),e)},a.onSwitchChange=function(e){var t=a.state.dataSource,r=a.filterByPara(t,a.state.clusterField,a.state.clusterValue,a.state.searchField,a.state.searchValue,a.state.switchField,e);a.setState({switchValue:e}),a.refreshTableData(r),a.setSesion("".concat(a.props.id,"Switch"),e)},a.setSesion=function(e,t){void 0!==e&&sessionStorage.setItem(e,t)},a.initData=function(e){var t=JSON.parse(JSON.stringify(e)),r=a.filterByPara(t,a.state.clusterField,a.state.clusterValue,a.state.searchField,a.state.searchValue,a.state.switchField,a.state.switchValue);a.setState({dataSource:t}),a.refreshTableData(r)},a.filterByPara=function(e,t,r,n,o,i,l){var c=JSON.parse(JSON.stringify(e));return a.isNullOrEmptyStr(i)||l&&"false"!==l||(c=c.filter((function(e){return!e[i].startsWith("_")}))),a.isNullOrEmptyStr(t)||a.isNullOrEmptyStr(r)||"ALL"===r||(c=a.searchdata(c,t,r)),a.isNullOrEmptyStr(o)||(c=a.searchdata(c,n,o)),c},a.searchdata=function(e,t,r){var a=t.split(",");return e.filter((function(e){for(var t=!1,n=0,o=a.length;n<o;n+=1){for(var i=a[n].split("."),l=e,c=0,s=i.length;c<s;c+=1)l=l[i[c]];if(-1!==l.toLocaleLowerCase().search(r.toLocaleLowerCase())){t=!0;break}}return t}))},a.isNullOrEmptyStr=function(e){return null==e||""===e},a.selectView=function(e){return y.a.createElement(R,{align:"center"},y.a.createElement("span",{style:{fontWeight:"600"}},e,":\xa0\xa0\xa0"),y.a.createElement(u.a,{showSearch:!0,dataSource:a.state.clusterSelectData,placeholder:"please select cluster",style:{width:"300px"},onChange:function e(t,r,n){a.handleClusterFilterChange(t,n)},value:a.state.clusterValue}))},a.filterView=function(e,t){return y.a.createElement(R,{align:"center"},y.a.createElement("span",{style:{fontWeight:"600"}},e,":\xa0\xa0\xa0"),y.a.createElement(c.a,{placeholder:a.isNullOrEmptyStr(t)?"Input filter value":t,hasClear:!0,onChange:a.handleFilterChange,style:{width:"300px"},value:a.state.searchValue}))},a.parseBoolean=function(e){return"true"===e||"TRUE"===e||"True"===e||"false"!==e&&"FALSE"!==e&&"False"!==e&&void 0},a.getFilterData=function(e){var t=JSON.parse(JSON.stringify(e)),r;return a.filterByPara(t,a.state.clusterField,a.state.clusterValue,a.state.searchField,a.state.searchValue,a.state.switchField,a.state.switchValue)},a.switchView=function(){var e=a.state.switchValue;return"string"==typeof a.state.switchValue&&(e=a.parseBoolean(a.state.switchValue.trim())),y.a.createElement(R,{align:"center"},y.a.createElement("div",{style:{display:"flex"}},y.a.createElement("span",{style:N.special},"Include special topic:\xa0\xa0"),y.a.createElement(n.a,{onChange:a.onSwitchChange,checked:e,defaultChecked:e,checkedChildren:y.a.createElement(i.a,{type:"select",size:"xs"}),unCheckedChildren:y.a.createElement(i.a,{type:"close",size:"xs"})})))},void 0!==a.props.onRef&&a.props.onRef(k(a));var o=sessionStorage.getItem("".concat(a.props.id,"Search")),l=sessionStorage.getItem("".concat(a.props.id,"Switch"));return a.state={dataSource:a.props.dataSource,clusterSelectData:[],clusterValue:Object(v.a)(a.props.id).cluster,clusterField:a.props.selectField,searchValue:null===o?"":o,searchField:a.props.searchField,switchField:a.props.switchField,switchValue:null!==l&&""!==l&&l},a}return w(r,[{key:"componentWillMount",value:function e(){this.mounted=!0}},{key:"componentDidMount",value:function e(){this.getCluster()}},{key:"componentWillReceiveProps",value:function e(t){this.validateCondition(this.state.dataSource,t.dataSource)&&(this.setState({dataSource:t.dataSource}),this.initData(t.dataSource))}},{key:"validateCondition",value:function e(t,r){return(null!=t||null!=r)&&((void 0!==t||void 0!==r)&&((0!==t.length||0!==r.length)&&(!this.arrayIsEqual(t,r)&&t!==r)))}},{key:"render",value:function e(){var t=this.props.selectTitle,r=this.props.searchTitle,a=this.props.searchPlaceholder,n=this.isNullOrEmptyStr(t)?"":this.selectView(t),o=this.isNullOrEmptyStr(r)?"":this.filterView(r,a),i=this.isNullOrEmptyStr(this.props.otherComponent)?"":this.props.otherComponent,l=this.isNullOrEmptyStr(this.props.switchField)?"":this.switchView();return y.a.createElement(P,{style:N.row},n,o,i,l)}}]),r}(h.Component),N={row:{margin:"20px 4px 20px"},special:{fontFamily:'Roboto, "Helvetica Neue", Helvetica, Tahoma, Arial, "PingFang SC", "Microsoft YaHei"',fontSize:"12px",lineHeight:"1.28571",color:"#333333",alignSelf:"center",fontWeight:"600"}},I=t.a=x},900:function(e,t,r){"use strict";var a=r(1),n=r.n(a),o=r(19);function i(e,t){return f(e)||u(e,t)||c(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function u(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],a=!0,n=!1,o=void 0;try{for(var i=e[Symbol.iterator](),l;!(a=(l=i.next()).done)&&(r.push(l.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(n)throw o}}return r}}function f(e){if(Array.isArray(e))return e}function p(e){var t=e.children,r,a,l,c;return e.rolename===i(Object(o.useAuth)(),1)[0].role?t:n.a.createElement("div",null)}t.a=p},976:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),o=r(68),i=r.n(o),l=r(158),c=r(157),s=r(83),u=r(156),f=r(69),p=r(199),d=r(22),m=r(82),h=r(21),y=r(133),b=r(47),v=r(56),g=r.n(v),E=r(134),S=r.n(E),w=r(13),O=r(24),D=r(900),j=r(896),C=r(270),k=r(897),F=r(91),T=r(89),P=r(42),R=r(62),x=r(20),N=r(90),I=r(16),V=r(195),_=r.n(V);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function A(e,t,r){return t&&q(e.prototype,t),r&&q(e,r),e}function W(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}function M(e,t){return(M=Object.setPrototypeOf||function e(t,r){return t.__proto__=r,t})(e,t)}function U(e){var t=J();return function r(){var a=K(e),n;if(t){var o=K(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return z(this,n)}}function z(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?H(e):t}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var Q=b.a.Row,Y=b.a.Col,$={key:"",value:""},G=function(e){W(r,e);var t=U(r);function r(e){var a;return B(this,r),(a=t.call(this,e)).onFormChange=function(e){a.setState({producer:e})},a.onReset=function(){a.setState({producer:{key:"",value:""}})},a.onSend=function(){a.refForm.validateFields((function(e){if(!e){a.setState({visible:!0});var t=a.state.producer;t.clusterID=a.state.queriesRecord.cluster.id,t.topicName=a.state.queriesRecord.topicName,O.a.post("/topic/list/producer",t).then((function(e){200===e.data.code?a.setState({producerResult:e.data.message,visible:!1}):(h.a.error({content:e.data.message,duration:5e3}),a.setState({visible:!1}))})).catch((function(e){console.error(e),a.setState({visible:!1})}))}}))},a.checkKey=function(e,t,r){""===t.trim()?r("Key is required"):r()},a.checkValue=function(e,t,r){""===t.trim()?r("Value is required"):r()},a.state={queriesRecord:a.props.record,producer:$,producerResult:"",visible:!1},a}return A(r,[{key:"componentWillReceiveProps",value:function e(t){this.setState({queriesRecord:t.record})}},{key:"componentWillMount",value:function e(){this.setState({producer:{key:"",value:""}})}},{key:"render",value:function e(){var t=this;return n.a.createElement(P.a,{tip:"Query...",visible:this.state.visible,fullScreen:!0,shape:"fusion-reactor"},n.a.createElement(Q,{align:"top"},n.a.createElement(Y,{span:"12",style:{height:"650px",lineHeight:"50px"}},n.a.createElement(_.a,{style:X.panel},n.a.createElement(_.a.Body,null,n.a.createElement(w.FormBinderWrapper,{ref:function e(r){t.refForm=r},value:this.state.producer,onChange:this.onFormChange},n.a.createElement("div",null,n.a.createElement(Q,{style:X.formRow},n.a.createElement(Y,{span:"8"},n.a.createElement("label",{style:X.formLabel},"Kafka Cluster:")),n.a.createElement(Y,{span:"16"},null==this.state.queriesRecord.cluster?"":this.state.queriesRecord.cluster.name)),n.a.createElement(Q,{style:X.formRow},n.a.createElement(Y,{span:"8"},n.a.createElement("label",{style:X.formLabel},"Topic Name:")),n.a.createElement(Y,{span:"16"},this.state.queriesRecord.topicName)),n.a.createElement(Q,{style:X.formRow},n.a.createElement(Y,{span:"8"},n.a.createElement("label",{style:X.formLabel},"Key:")),n.a.createElement(Y,{span:"16"},n.a.createElement(w.FormBinder,{name:"key",required:!0,message:"required",validator:this.checkKey},n.a.createElement(I.a,{style:X.input,placeholder:"Enter key"})),n.a.createElement(w.FormError,{name:"key"}))),n.a.createElement(Q,{style:X.formRow},n.a.createElement(Y,{span:"8"},n.a.createElement("label",{style:X.formLabel},"Value:")),n.a.createElement(Y,{span:"16"},n.a.createElement(w.FormBinder,{name:"value",required:!0,message:"required",validator:this.checkValue},n.a.createElement(I.a.TextArea,{style:X.input,placeholder:"Enter value",rows:15})),n.a.createElement(w.FormError,{name:"value"}))),n.a.createElement(Q,{style:X.formRow}),n.a.createElement("hr",null),n.a.createElement(Q,{style:X.formRow},n.a.createElement(Y,{span:"24",style:{textAlign:"center"}},n.a.createElement(x.a,{type:"primary",size:"large",onClick:this.onSend},n.a.createElement(g.a,{type:"forward"})," Send"),"\xa0\xa0\xa0\xa0",n.a.createElement(x.a,{type:"normal",size:"large",onClick:this.onReset},n.a.createElement(g.a,{type:"exchange"})," Reset")))))))),n.a.createElement(Y,{span:"12",style:{height:"650px",fontSize:"10px",lineHeight:"20px"}},n.a.createElement(_.a,{style:X.panelConsole},n.a.createElement(_.a.Body,null,this.state.producerResult)))))}}]),r}(a.Component);G.displayName="Producer";var X={panelConsole:{height:"650px",backgroundColor:"#002b36",overflowY:"scroll",color:"greenyellow"},panel:{height:"550px",marginBottom:"10px"},formRow:{marginTop:20},formLabel:{lineHeight:"26px",fontWeight:"700",textAlign:"right"}};function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function oe(e,t,r){return t&&ne(e.prototype,t),r&&ne(e,r),e}function ie(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}function le(e,t){return(le=Object.setPrototypeOf||function e(t,r){return t.__proto__=r,t})(e,t)}function ce(e){var t=fe();return function r(){var a=pe(e),n;if(t){var o=pe(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return se(this,n)}}function se(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?ue(e):t}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var de=function(e){ie(r,e);var t=ce(r);function r(e){var a;return ae(this,r),(a=t.call(this,e)).hideDetailDialog=function(){a.props.hideDetailDialog()},a.onOk=function(){a.hideDetailDialog()},a.state={dialogObj:a.props.dialogObj},a}return oe(r,[{key:"componentWillReceiveProps",value:function e(t){this.setState({dialogObj:t.dialogObj})}},{key:"render",value:function e(){var t=te({},me.simpleFormDialog),r={children:"OK"},a={children:"Cancel"};return n.a.createElement(s.a,{className:"simple-form-dialog",style:t,autoFocus:!1,footerAlign:"center",onOk:this.onOk,onCancel:this.hideDetailDialog,onClose:this.hideDetailDialog,isFullScreen:!0,visible:this.state.dialogObj.visible,okProps:r,cancelProps:a},n.a.createElement("div",{className:"detail-table"},n.a.createElement(i.a,{title:"Topic Detail"},n.a.createElement("ul",{style:me.detailTable},n.a.createElement("li",{style:me.detailItem},n.a.createElement("div",{style:me.detailTitle},"Topic Name:"),n.a.createElement("div",{style:me.detailBody},this.state.dialogObj.record.topicName)),n.a.createElement("li",{style:me.detailItem},n.a.createElement("div",{style:me.detailTitle},"Kafka Cluster:"),n.a.createElement("div",{style:me.detailBody},this.state.dialogObj.record.cluster?this.state.dialogObj.record.cluster.name:"")),n.a.createElement("li",{style:me.detailItem},n.a.createElement("div",{style:me.detailTitle},"Owner:"),n.a.createElement("div",{style:me.detailBody},this.state.dialogObj.record.owner?this.state.dialogObj.record.owner.name:"")),n.a.createElement("li",{style:me.detailItem},n.a.createElement("div",{style:me.detailTitle},"Team:"),n.a.createElement("div",{style:me.detailBody},this.state.dialogObj.record.team?this.state.dialogObj.record.team.name:"")),n.a.createElement("li",{style:me.detailItem},n.a.createElement("div",{style:me.detailTitle},"TTL:"),n.a.createElement("div",{style:me.detailBody},Object(j.h)(this.state.dialogObj.record.ttl),"\xa0(hour)")),n.a.createElement("li",{style:me.detailItem},n.a.createElement("div",{style:me.detailTitle},"Partitions:"),n.a.createElement("div",{style:me.detailBody},this.state.dialogObj.record.partition)),n.a.createElement("li",{style:me.detailItem},n.a.createElement("div",{style:me.detailTitle},"Replication Factor:"),n.a.createElement("div",{style:me.detailBody},this.state.dialogObj.record.replication)),n.a.createElement("li",{style:me.detailItem},n.a.createElement("div",{style:me.detailTitle},"Comments:"),n.a.createElement("div",{style:me.detailBody},this.state.dialogObj.record.comments))))))}}]),r}(a.Component);de.displayName="DetailDialog";var me={simpleFormDialog:{width:"640px"},detailItem:{padding:"15px 0px",display:"flex",borderTop:"1px solid #EEEFF3"},detailTitle:{marginRight:"30px",textAlign:"right",width:"120px",color:"#999999"}};function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(r),!0).forEach((function(t){ve(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ve(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Se(e,t,r){return t&&Ee(e.prototype,t),r&&Ee(e,r),e}function we(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}function Oe(e,t){return(Oe=Object.setPrototypeOf||function e(t,r){return t.__proto__=r,t})(e,t)}function De(e){var t=ke();return function r(){var a=Fe(e),n;if(t){var o=Fe(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return je(this,n)}}function je(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?Ce(e):t}function Ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}var Te=b.a.Row,Pe=b.a.Col,Re=function(e){we(r,e);var t=De(r);function r(){var e;return ge(this,r),(e=t.call(this)).componentWillUnmount=function(){e.mounted=!1},e.fetchTeam=function(){O.a.get("/team/").then((function(t){if(200===t.data.code){if(e.mounted){var r=e.resouceData(t.data.data);e.setState({teamData:r})}}else h.a.error(t.data.message)})).catch((function(e){console.error(e)}))},e.fetchUser=function(t){O.a.get("/team/userinfos/".concat(t)).then((function(t){if(200===t.data.code){if(e.mounted){var r=e.resouceData(t.data.data);e.setState({ownerData:r})}}else h.a.error(t.data.message)})).catch((function(e){console.error(e)}))},e.resouceData=function(e){var t=[];return e.forEach((function(e){var r={value:e.id,label:e.name};t.push(r)})),t},e.fetchData=function(t){e.setState({isLoading:!0},(function(){O.a.get("/topic/list?cluster=".concat(t)).then((function(t){if(200===t.data.code){if(e.mounted){var r=null!=sessionStorage.getItem("topicTopicListSwitch")&&sessionStorage.getItem("topicTopicListSwitch"),a=Object(j.d)(t.data.data,"topicName"),n=a;r&&"false"!==r||(a=a.filter((function(e){return!e.topicName.startsWith("_")})));var o=sessionStorage.getItem("topicTopicListSearch");void 0!==o&&null!=o&&""!==o&&(a=a.filter((function(e){return-1!==e.topicName.toLowerCase().search(o.toLowerCase())}))),e.setState({filterDataSource:a,dataSource:n,isLoading:!1})}}else h.a.error(t.data.message)})).catch((function(e){console.error(e)}))}))},e.refreshTableData=function(t){e.setState({filterDataSource:t})},e.renderBytes=function(e){return null!==e&&e?-1===e?"-":Object(j.a)(e):0===e?Object(j.a)(0):"-"},e.handelDetail=function(t){e.setState({dialogObj:{record:t,visible:!e.state.dialogObj.visible}})},e.handelQueries=function(t){e.setState({isQueries:!0,queriesRecord:t})},e.handleUpdate=function(t){e.fetchTeam();var r=t.cluster.name;e.setState({uvisable:!e.state.uvisable,value:t,spanCluster:r})},e.renderOper=function(t,r,a){return n.a.createElement("div",null,n.a.createElement("a",{style:xe.link,onClick:function t(){return e.handelDetail(a)}},"Detail"),n.a.createElement("span",{style:xe.separator}),n.a.createElement("span",{title:"Mock",style:xe.operBtn},n.a.createElement("a",{style:xe.link,onClick:function t(){return e.handelQueries(a)}},"Mock")),n.a.createElement(D.a,{rolename:"admin"},n.a.createElement("span",{style:xe.separator}),n.a.createElement("span",{title:"Modify",style:xe.operBtn},n.a.createElement("a",{style:xe.link,onClick:function t(){return e.handleUpdate(a)}},"Modify"))))},e.hideDetailDialog=function(){e.setState({dialogObj:{record:{},visible:!1}})},e.backward=function(){e.setState({isQueries:!1});var t=Object(F.a)("topicTopicList").id;e.fetchData(t)},e.onOk=function(){e.refForm.validateAll((function(t){if(!t){var r=e.state.value;O.a.post("/topic/update",r).then((function(t){200===t.data.code?e.mounted&&h.a.success(t.data.message):h.a.error(t.data.message),e.onCancel();var r=Object(F.a)("topicTopicList").id;e.fetchData(r)})).catch((function(e){console.error(e)}))}}))},e.onCancel=function(){e.setState({uvisable:!e.state.uvisable})},e.onTeamChange=function(t){e.fetchUser(t)},e.renderTopic=function(e){return e?e.name:""},e.renderTime=function(e){return e?S()(e).format("YYYY-MM-DD HH:mm:ss"):"-"},e.redrawPageData=function(t){e.setState({pageData:t})},e.state={isQueries:!1,queriesRecord:{},isLoading:!1,pageData:[],isMobile:!1,uvisable:!1,dialogObj:{record:{},visible:!1},value:{},teamData:[],ownerData:[],spanCluster:"",filterDataSource:[],dataSource:[]},e}return Se(r,[{key:"componentWillMount",value:function e(){this.mounted=!0}},{key:"shouldComponentUpdate",value:function e(t,r){return this.state.clusterData===r.clusterData}},{key:"onSort",value:function e(t,r){var a=Object(j.d)(this.state.dataSource,t,r);this.refreshTableData(a)}},{key:"render",value:function e(){var t=this,r=this.state,a=r.isLoading,o=r.dialogObj,i=r.isQueries,l=r.isMobile,c=null,u=be({},xe.simpleFormDialog),p={children:"OK"},m={children:"Cancel"};return l&&(u.width="300px"),c=i?n.a.createElement("div",null,n.a.createElement("span",null,n.a.createElement("h3",{style:{margin:"0px 0px 0px",fontSize:"20px",fontWeight:"500",color:"rgba(0, 0, 0, 0.85)"}},n.a.createElement(g.a,{onClick:function e(){return t.backward()},style:xe.backward,size:"large",type:"backward"}),"Kafka Producer")),n.a.createElement(G,{record:this.state.queriesRecord})):n.a.createElement("div",null,n.a.createElement(de,{dialogObj:o,hideDetailDialog:this.hideDetailDialog}),n.a.createElement(k.a,{dataSource:this.state.dataSource,refreshTableData:this.refreshTableData,refreshDataSource:this.fetchData,selectTitle:"Cluster",selectField:"cluster.name",searchTitle:"Filter",searchField:"topicName",searchPlaceholder:"Input Topic Name",switchField:"topicName",id:"topicTopicList"}),n.a.createElement(d.a,{loading:a,dataSource:this.state.pageData,hasBorder:!1,onSort:function e(r,a){return t.onSort(r,a)}},n.a.createElement(d.a.Column,{title:"Topic Name",dataIndex:"topicName",sortable:!0}),n.a.createElement(d.a.Column,{title:"File Size",dataIndex:"fileSize",cell:this.renderBytes,sortable:!0}),n.a.createElement(d.a.Column,{title:"Cluster",dataIndex:"cluster.name"}),n.a.createElement(d.a.Column,{title:"Create Date",dataIndex:"createTime",cell:this.renderTime}),n.a.createElement(d.a.Column,{title:"Owner",dataIndex:"owner",cell:this.renderTopic}),n.a.createElement(d.a.Column,{title:"Team",dataIndex:"team",cell:this.renderTopic}),n.a.createElement(d.a.Column,{title:"Operation",cell:this.renderOper})),n.a.createElement(C.a,{dataSource:this.state.filterDataSource,redrawPageData:this.redrawPageData}),n.a.createElement(s.a,{visible:this.state.uvisable,className:"simple-form-dialog",onOk:this.onOk,onCancel:this.onCancel,footerAlign:"center",autoFocus:!1,isFullScreen:!0,onClose:this.onCancel,style:u,closeable:"esc,mask,close",title:"Update",okProps:p,cancelProps:m},n.a.createElement(w.FormBinderWrapper,{ref:function e(r){t.refForm=r},value:this.state.value},n.a.createElement("div",null,n.a.createElement(Te,{style:xe.formRow},n.a.createElement(Pe,{span:"".concat("6"),style:xe.label},"Cluster:"),n.a.createElement(Pe,{span:"".concat(l?"18":"16")},n.a.createElement("span",{style:{width:"100%"}},this.state.spanCluster))),n.a.createElement(Te,{style:xe.formRow},n.a.createElement(Pe,{span:"".concat("6"),style:xe.label},"Topic Name:"),n.a.createElement(Pe,{span:"".concat(l?"18":"16")},n.a.createElement("span",{style:{width:"100%"}},this.state.value.topicName))),n.a.createElement(Te,{style:xe.formRow},n.a.createElement(Pe,{span:"".concat("6"),style:xe.label},"Team:"),n.a.createElement(Pe,{span:"".concat(l?"18":"16")},n.a.createElement(w.FormBinder,{name:"teamId",required:!0,message:"Required"},n.a.createElement(f.a,{showSearch:!0,dataSource:this.state.teamData,placeholder:"please select team",style:{width:"100%"},onChange:function e(r,a,n){t.onTeamChange(r,a,n)},disabled:this.state.value.disabled})),n.a.createElement(w.FormError,{name:"teamId"}))),n.a.createElement(Te,{style:xe.formRow},n.a.createElement(Pe,{span:"".concat("6"),style:xe.label},"Owner:"),n.a.createElement(Pe,{span:"".concat(l?"18":"16")},n.a.createElement(w.FormBinder,{name:"ownerId",required:!0,message:"Required"},n.a.createElement(f.a,{showSearch:!0,dataSource:this.state.ownerData,placeholder:"please select team user",style:{width:"100%"},disabled:this.state.value.disabled})),n.a.createElement(w.FormError,{name:"ownerId"})))))))}}]),r}(a.Component),xe={link:{margin:"0 5px",color:"rgba(49, 128, 253, 0.65)",cursor:"pointer",textDecoration:"none"},separator:{margin:"0 8px",display:"inline-block",height:"12px",width:"1px",verticalAlign:"middle",background:"#e8e8e8"},backward:{display:"inline-block",minWidth:"40px",marginBottom:"15px",cursor:"pointer",color:"#0066FF"},formRow:{marginTop:20},simpleFormDialog:{width:"640px"}},Ne={container:{margin:"20px",padding:"10px 20px 20px",minHeight:"600px"}},Ie,Ve=function e(){var t=[{link:"",text:"Topic"},{link:"",text:"Topic List"}];return n.a.createElement("div",null,n.a.createElement(l.a,{items:t,title:"Topic List"}),n.a.createElement(i.a,{style:Ne.container},n.a.createElement(Re,null)))},_e=t.default=Ve}}]);